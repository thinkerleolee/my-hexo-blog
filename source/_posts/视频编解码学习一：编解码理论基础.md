---
title: 视频编解码学习一：编解码理论基础
date: 2019-01-27 23:30:07
tags:
    - 音视频
    - 编解码
categories:
    - 音视频开发
mathjax: true
---

- **为什么要进行视频压缩？**

    未经压缩的数字视频（原始数据）的数据量巨大导致的存储困难、传输困难。

- **为什么能进行视频压缩？**

    可以去除视频中的冗余信息

    - 空间冗余：图像相邻像素之间有较强的相关性
    - 时间冗余：视频序列的相邻图像之间内容相似
    - 编码冗余：不同像素值出现的概率不同
    - 视觉冗余：人的视觉系统对某些细节不敏感
    - 知识冗余：规律性的结构可由先验知识和背景知识得到

- **数据压缩分了几类？**

    - 无损压缩（Lossless）

        - 压缩前和解压缩后数据完全一致

        - 压缩比比较低(2:1~3:1)

        无损压缩算法的代表为:gzip(数据)、APE(音频)、JPEG-LS（视频）

    - 有损压缩（Lossy）

        - 压缩前后数据不一致$X \neq X'$

        - 压缩比高(10:1~20:1)

        - 例如：MPEG-2，H.264/AVC，AVS

    [![201207290832356582.png](https://i.loli.net/2019/01/27/5c4dce56edafc.png)](https://i.loli.net/2019/01/27/5c4dce56edafc.png)

    - **那什么是编解码器呢？**

        - 编码器（Encoder）

            - 压缩信号的设备或程序
        
        - 解码器（Decoder）

            - 解压缩信号的设备或程序
        
        - 编解码器（Codec）

            - 编解码器对

    - 编码器和解码器的一般工作过程是什么？

        - 编码器

            [![201207290832366059.png](https://i.loli.net/2019/01/27/5c4dce5717f84.png)](https://i.loli.net/2019/01/27/5c4dce5717f84.png)

        - 解码器

            [![201207290832364663.png](https://i.loli.net/2019/01/27/5c4dce56eecc3.png)](https://i.loli.net/2019/01/27/5c4dce56eecc3.png)

 - **视频传输的QoS参数是什么**？

    - 数据包的端到端的延迟

    - 带宽：比特/秒   

    - 数据包的流失率（丢包率）

    - 数据包的延迟时间的波动

- **我们经常见到的.mov\\.mp4\\.rmvb这是指的是编码标准吗？**

    不是，.mov等只是封装格式，封装了视频编码协议、音频编码协议等信息。

    如下图所示：“变形金刚预告片_h1080p.mov”采用MPEG4的QuickTime封装格式（MOV），采用了H.264（AVC）的压缩编码标准。

    [![20140201115933359.jpg](https://i.loli.net/2019/01/27/5c4dce571e18f.jpg)](https://i.loli.net/2019/01/27/5c4dce571e18f.jpg)


- **那网上下载下来的视频播放流程是什么呢？**

    视频播放器播放一个互联网上的视频文件，需要经过以下几个步骤：解协议，解封装，解码视音频，视音频同步。如果播放本地文件则不需要解协议，为以下几个步骤：解封装，解码视音频，视音频同步。他们的过程如图所示。

    [![20140201120523046.jpg](https://i.loli.net/2019/01/27/5c4dce56e2eda.jpg)](https://i.loli.net/2019/01/27/5c4dce56e2eda.jpg)

    **解协议**的作用，就是将流媒体协议的数据，解析为标准的相应的封装格式数据。视音频在网络上传播的时候，常常采用各种流媒体协议，例如HTTP，RTMP，或是MMS等等。这些协议在传输视音频数据的同时，也会传输一些信令数据。这些信令数据包括对播放的控制（播放，暂停，停止），或者对网络状态的描述等。解协议的过程中会去除掉信令数据而只保留视音频数据。例如，采用RTMP协议传输的数据，经过解协议操作后，输出FLV格式的数据。

    **解封装**的作用，就是将输入的封装格式的数据，分离成为音频流压缩编码数据和视频流压缩编码数据。封装格式种类很多，例如MP4，MKV，RMVB，TS，FLV，AVI等等，它的作用就是将已经压缩编码的视频数据和音频数据按照一定的格式放到一起。例如，FLV格式的数据，经过解封装操作后，输出H.264编码的视频码流和AAC编码的音频码流。

    **解码**的作用，就是将视频/音频压缩编码数据，解码成为非压缩的视频/音频原始数据。音频的压缩编码标准包含AAC，MP3，AC-3等等，视频的压缩编码标准则包含H.264，MPEG2，VC-1等等。解码是整个系统中最重要也是最复杂的一个环节。通过解码，压缩编码的视频数据输出成为非压缩的颜色数据，例如YUV420P，RGB等等；压缩编码的音频数据输出成为非压缩的音频抽样数据，例如PCM数据。

    **视音频同步**的作用，就是根据解封装模块处理过程中获取到的参数信息，同步解码出来的视频和音频数据，并将视频音频数据送至系统的显卡和声卡播放出来。

- **目前主流的视频编码标准有什么呢？**

    ![TIM截图20190127233628.png](https://i.loli.net/2019/01/27/5c4dd01441be8.png)

    图中H.264等仅仅是编码标准，而不是一个具体的编码器，H.264只是给编码器的实现提供参照用的。类似于C\C++和GCC的关系。

**整理自 雷霄骅 的Blog [https://blog.csdn.net/leixiaohua1020](https://blog.csdn.net/leixiaohua1020)**